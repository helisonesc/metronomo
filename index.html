<!DOCTYPE html>
<html>
<head>
    <title>Metrônomo da Música</title>
    <style>
        body { font-family: sans-serif; text-align: center; margin-top: 50px; background-color: #f0f0f0; }
        .bpm-display { font-size: 3em; font-weight: bold; margin-bottom: 20px; }
        button { padding: 10px 20px; font-size: 1.2em; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Metrônomo</h1>
    <div class="bpm-display">-- BPM</div>
    <button id="startButton">Tocar</button>

    <script>
        // Pega o valor do BPM da URL (ex: ?bpm=120)
        const params = new URLSearchParams(window.location.search);
        const bpm = parseInt(params.get('bpm'));

        const bpmDisplay = document.querySelector('.bpm-display');
        const startButton = document.getElementById('startButton');
        let metronomeInterval;

        // O som do clique pode ser criado dentro da função para garantir que ele esteja pronto
        // após a interação do usuário. Usamos o Base64 para um som de clique simples.
        const clickSoundData = 'data:audio/wav;base64,UklGRlZ9AABXQVZFZm10IBAAAAABAAEAwAgAAMABAAABAAEAwBAAFBCAAAACABAA+gAAAGQAEAAIAAwAAAEhAAABCAABoAAAAlAAAALAAAACIAAAAWAAAMAAAACAAABUABAAIAABAAAgAAAEAAAAADAgQA';

        if (!isNaN(bpm) && bpm > 0) {
            bpmDisplay.textContent = `${bpm} BPM`;
            
            startButton.addEventListener('click', () => {
                if (!metronomeInterval) {
                    const intervalInMs = 60000 / bpm;
                    
                    // Inicia o metrônomo e toca o som
                    metronomeInterval = setInterval(() => {
                        const clickSound = new Audio(clickSoundData);
                        clickSound.play().catch(e => console.error("Erro ao tocar o áudio:", e));
                    }, intervalInMs);
                    
                    startButton.textContent = 'Parar';
                } else {
                    clearInterval(metronomeInterval);
                    metronomeInterval = null;
                    startButton.textContent = 'Tocar';
                }
            });
        } else {
            bpmDisplay.textContent = 'BPM inválido';
            startButton.style.display = 'none'; // Esconde o botão se o BPM for inválido
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Metrônomo da Música</title>
    <style>
        body { font-family: sans-serif; text-align: center; margin-top: 50px; background-color: #f0f0f0; }
        .bpm-display { font-size: 3em; font-weight: bold; margin-bottom: 20px; }
        button { padding: 10px 20px; font-size: 1.2em; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Metrônomo</h1>
    <div class="bpm-display">-- BPM</div>
    <button id="startButton">Tocar</button>

    <script>
        // Pega o valor do BPM da URL (ex: ?bpm=120)
        const params = new URLSearchParams(window.location.search);
        const bpm = parseInt(params.get('bpm'));

        const bpmDisplay = document.querySelector('.bpm-display');
        const startButton = document.getElementById('startButton');
        let metronomeInterval;
        const clickSound = new Audio('data:audio/wav;base64,UklGRlZ9AABXQVZFZm10IBAAAAABAAEAwAgAAMABAAABAAEAwBAAFBCAAAACABAA+gAAAGQAEAAIAAwAAAEhAAABCAABoAAAAlAAAALAAAACIAAAAWAAAMAAAACAAABUABAAIAABAAAgAAAEAAAAADAgQA'); // Um som simples de clique

        if (!isNaN(bpm) && bpm > 0) {
            bpmDisplay.textContent = `${bpm} BPM`;
            
            // Oculta o botão Tocar para que o usuário clique no display para iniciar o som.
            // A maioria dos navegadores exige uma interação do usuário para iniciar o áudio.
            startButton.style.display = 'block';

            startButton.addEventListener('click', () => {
                if (!metronomeInterval) {
                    // Calcula o intervalo em milissegundos
                    const intervalInMs = 60000 / bpm;
                    metronomeInterval = setInterval(() => {
                        clickSound.play();
                    }, intervalInMs);
                    startButton.textContent = 'Parar';
                } else {
                    clearInterval(metronomeInterval);
                    metronomeInterval = null;
                    startButton.textContent = 'Tocar';
                }
            });
        } else {
            bpmDisplay.textContent = 'BPM inválido';
        }

    </script>
</body>

</html>
